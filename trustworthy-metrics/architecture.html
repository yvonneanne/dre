
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A collection of docs for the DRE team">
      
      
      
      
        <link rel="prev" href="../bazel/tips-and-tricks.html">
      
      
        <link rel="next" href="trustworthy-metrics.html">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.4">
    
    
      
        <title>Trustworthy Node Metrics: Architectural Overview and Design - DRE team docs</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.50c56a3b.min.css">
      
      


    
    
      
        <script src="https://unpkg.com/iframe-worker/shim"></script>
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#trustworthy-node-metrics-architectural-overview-and-design" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../index.html" title="DRE team docs" class="md-header__button md-logo" aria-label="DRE team docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            DRE team docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Trustworthy Node Metrics: Architectural Overview and Design
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/dfinity/dre/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Decentralized Reliability Engineering
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../index.html" title="DRE team docs" class="md-nav__button md-logo" aria-label="DRE team docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    DRE team docs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/dfinity/dre/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Decentralized Reliability Engineering
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Repo description
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../how-to-update-docs.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Documentation
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../nns-proposals.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    NNS/ic-admin operations
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Bazel
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Bazel
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../bazel/tips-and-tricks.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tips and tricks
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Trustworthy metrics
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Trustworthy metrics
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Trustworthy Node Metrics: Architectural Overview and Design
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="architecture.html" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Trustworthy Node Metrics: Architectural Overview and Design
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#objectives" class="md-nav__link">
    <span class="md-ellipsis">
      Objectives
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#high-level-architectural-changes" class="md-nav__link">
    <span class="md-ellipsis">
      High-Level Architectural Changes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="High-Level Architectural Changes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#integration-with-existing-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      Integration with Existing Architecture
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#expose-already-existing-information-to-end-users" class="md-nav__link">
    <span class="md-ellipsis">
      Expose already existing information to end users
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-accessibility" class="md-nav__link">
    <span class="md-ellipsis">
      Data Accessibility
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#detailed-architectural-diagrams-and-data-flow" class="md-nav__link">
    <span class="md-ellipsis">
      Detailed Architectural Diagrams and Data Flow
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#changes-in-the-public-specification" class="md-nav__link">
    <span class="md-ellipsis">
      Changes in the Public Specification
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#security-and-reliability-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      Security and Reliability Considerations
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="trustworthy-metrics.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Get trustworthy metrics from the IC Mainnet
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#objectives" class="md-nav__link">
    <span class="md-ellipsis">
      Objectives
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#high-level-architectural-changes" class="md-nav__link">
    <span class="md-ellipsis">
      High-Level Architectural Changes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="High-Level Architectural Changes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#integration-with-existing-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      Integration with Existing Architecture
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#expose-already-existing-information-to-end-users" class="md-nav__link">
    <span class="md-ellipsis">
      Expose already existing information to end users
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-accessibility" class="md-nav__link">
    <span class="md-ellipsis">
      Data Accessibility
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#detailed-architectural-diagrams-and-data-flow" class="md-nav__link">
    <span class="md-ellipsis">
      Detailed Architectural Diagrams and Data Flow
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#changes-in-the-public-specification" class="md-nav__link">
    <span class="md-ellipsis">
      Changes in the Public Specification
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#security-and-reliability-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      Security and Reliability Considerations
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/dfinity/dre/edit/main/docs/trustworthy-metrics/architecture.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/dfinity/dre/raw/main/docs/trustworthy-metrics/architecture.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.15 8.15 0 0 1-1.23-2Z"/></svg>
    </a>
  


<h1 id="trustworthy-node-metrics-architectural-overview-and-design">Trustworthy Node Metrics: Architectural Overview and Design<a class="headerlink" href="#trustworthy-node-metrics-architectural-overview-and-design" title="Permanent link">&para;</a></h1>
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h2>
<p>This document offers a deeper look at the architectural design of the Trustworthy Node Metrics feature on the Internet Computer (IC). It is tailored for IC stakeholders and technical professionals, providing a detailed understanding of both the functional and structural aspects.</p>
<h2 id="objectives">Objectives<a class="headerlink" href="#objectives" title="Permanent link">&para;</a></h2>
<p>The primary goal is to provide clear visibility into the useful work carried out by nodes on the IC. This transparency is a foundational step towards a future feature that will enable the adjustment of node remuneration based on their operational performance and reliability.</p>
<h2 id="high-level-architectural-changes">High-Level Architectural Changes<a class="headerlink" href="#high-level-architectural-changes" title="Permanent link">&para;</a></h2>
<p>On a high level, planned architectural changes are illustrated in the following figure:</p>
<p><img alt="Architectural changes diagram" src="image.png" /></p>
<h3 id="integration-with-existing-architecture">Integration with Existing Architecture<a class="headerlink" href="#integration-with-existing-architecture" title="Permanent link">&para;</a></h3>
<p>The feature is designed to integrate seamlessly with the existing IC infrastructure. The changes primarily involve the Consensus Layer, Message Routing Layer, and the addition of new components to handle metric aggregation and retrieval.</p>
<h3 id="expose-already-existing-information-to-end-users">Expose already existing information to end users<a class="headerlink" href="#expose-already-existing-information-to-end-users" title="Permanent link">&para;</a></h3>
<p>Consensus Layer to expose block maker information, which will be collected and aggregated by the Message Routing Layer, and stored in the replicated state with success and failure metrics of nodes.
- The metrics for the number of successfully proposed blocks and failures thereof are accumulated in the replicated state for node IDs. 
- The state of this accumulation is saved as a snapshot including the last batch just before midnight in a queue of snapshots (in chronologically ascending order).
- Snapshots in the queue are immutable, i.e. the current state is not included.
- There is no guarantee that the snapshots represent whole days or that all days are included since the subnet could have been offline at some point. </p>
<h3 id="data-accessibility">Data Accessibility<a class="headerlink" href="#data-accessibility" title="Permanent link">&para;</a></h3>
<p>The inclusion of new components to ensure that the metrics are easily accessible for analysis and decision-making processes. This involves the management canister playing a crucial role in fetching and providing these metrics to stakeholders.</p>
<ul>
<li>
<p>A metrics-fetching function is added to the management canister</p>
</li>
<li>
<p>There is support for querying since particular date</p>
</li>
<li>
<p>The function will return data from the replicated state.</p>
</li>
<li>
<p>See https://github.com/dfinity/interface-spec/pull/215 for more details.</p>
</li>
</ul>
<p>The DRE team provided open source tooling that fetches the metrics from the management canister(s) of all subnets and allows the community members to inspect the metrics in details.</p>
<ul>
<li>
<p>The metrics retrieved from the IC can be stored in a local file (JSON format), and then further analyzed</p>
</li>
<li>
<p>The metrics will be retrieved from all subnets in parallel, whenever possible, to reduce the amount of time needed to fetch them, taking into account the possible increase of the number of subnets in the future.</p>
</li>
<li>
<p>See <a href="trustworthy-metrics.html">trustworthy-metrics</a></p>
</li>
</ul>
<h2 id="detailed-architectural-diagrams-and-data-flow">Detailed Architectural Diagrams and Data Flow<a class="headerlink" href="#detailed-architectural-diagrams-and-data-flow" title="Permanent link">&para;</a></h2>
<p>The high-level and in-depth technical diagrams provide a visual representation of the data flow within the IC architecture with to the implementation of the Trustworthy Node Metrics feature.</p>
<pre class="mermaid"><code>graph TD
    subgraph "IC Community"
        F["Community Members\n[verify metrics]"] --&gt;T[DRE Tooling]
        F --&gt; H[Data Analysis Tools]
        H --&gt; J[JSON data with metrics]
        J --&gt; I[Community Insight and Verification of Node Performance]
    end
    subgraph Sx["IC subnet X"]
        T &lt;----&gt; W
        W[Wallet Canister]
        W &lt;-..-&gt;|fetch data| D1
        A1[Consensus Layer] --&gt;|Exposes block maker information| B1["Message Routing (MR) Layer"]
        B1 --&gt;|Aggregates and writes| C1(((Replicated State)))
        D1[Management Canister] --&gt;|Trustworthy metrics API| C1
    end
    subgraph Sy["IC subnet Y"]
        W &lt;-.....-&gt;|"Fetch data with\ncross-subnet (XNet) calls"| D2
        A2[Consensus Layer] --&gt;|Exposes block maker information| B2["Message Routing (MR) Layer"]
        B2 --&gt;|Aggregates and writes| C2(((Replicated State)))
        D2[Management Canister] --&gt;|Trustworthy metrics API| C2
    end
    subgraph Sz["IC subnet Z"]
        W &lt;-.....-&gt;|"Fetch data with\ncross-subnet (XNet) calls"| D3
        A3[Consensus Layer] --&gt;|Exposes block maker information| B3["Message Routing (MR) Layer"]
        B3 --&gt;|Aggregates and writes| C3(((Replicated State)))
        D3[Management Canister] --&gt;|Trustworthy metrics API| C3
    end</code></pre>
<p><a href="https://mermaid.live/edit#pako:eNqtlFFv2jAQx7_KyU8gQSWSNzRVoqRVQYNVgEbXhAeTHMFqYiPbGWWl373n0JEwqa2K5pdYd3__7-4Xy88sVgmyLks136xhFkQSaJlieQhEbNCHvsrzQgq7i9gh7dZNGLFjAkaYL1GbKJLhb9RitYMcrRaxWURsAe325SwMJtcwUyoTMl3UbFwSbsOAWw49ybOdEabUmZrqtlQNw-H0xxgSJ90Ku65qHIXDUjgIq84G0oh0bYHLBH661kTMrVAS1ArGNDvcoV4pnXMZ45sRyuQfDNOnsCRBAYkW7mmoquYMvrXbruy8is3DOc8ykva5FMairunnpL-4aF_uV2jjdTnOHoJOJeh1qH9pUJrCwHe-o9NurP3100YZNLDMVPwIOX9EDUKWzbuJ9nDVoTZHaAxPESaqsMQaGqNJ8-By0vVVp_TspanGlFuydYS2WtB2D_1Oo9GY4CZztDCBqaVPs9mszgedcMQlFcpR1sYsTWe6MHartF0f7wH07gbO9l3CuxPCv056PRC7KKFF7OaIrbwFdOdirYxpvx1t3I_RNiEm_iZiRNarkfXOJet9gaz3IVnvU7LeOWS9d8n-OSH78B_J-jWy_rlk_S-Q9T8k639K1j-HrF8jy1osR-pdJPRmPrtExOya_CLWpW2CK15k1r2TLyTlhVXTnYxZ1-oCW6zYEFsMBKc_k7PuimeGopgIq_To8A6Xz3GLbbh8UOqv5uUVRR7Msg">Link for online editing with preview</a></p>
<h2 id="changes-in-the-public-specification">Changes in the Public Specification<a class="headerlink" href="#changes-in-the-public-specification" title="Permanent link">&para;</a></h2>
<p>Addition of the <code>node_metrics</code> Interface: This involves updating the existing public spec to include a new <code>node_metrics</code> interface that will provide detailed metrics about node performance.</p>
<p>This new interface is marked as experimental, which means that end users should not count on it being permanently being present without changes.</p>
<h2 id="security-and-reliability-considerations">Security and Reliability Considerations<a class="headerlink" href="#security-and-reliability-considerations" title="Permanent link">&para;</a></h2>
<p>The feature requires the use of a wallet canister, in order to prevent abuse. Each request for fetching metrics will be charged for, which makes it harder for malicious users to conduct DOS attacks using this interface.</p>
<p>All data is retrieved through <code>update</code> calls, in order to prevent a potentially malicious node from providing false data.</p>
<h2 id="conclusion">Conclusion<a class="headerlink" href="#conclusion" title="Permanent link">&para;</a></h2>
<p>The Trustworthy Node Metrics feature enables the next milestone in the transparency and operational efficiency of the IC. By providing clear insights into node performance, it lays the groundwork for decentralized data-driven decision making, and for future enhancements in node remuneration processes.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.action.edit", "content.action.view", "content.tooltips", "navigation.sections", "navigation.instant", "search.suggest", "search.highlight", "search.share"], "search": "../assets/javascripts/workers/search.c011b7c0.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.7389ff0e.min.js"></script>
      
    
  </body>
</html>